<!doctype html>
<html lang="th" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ô‡∏¥‡∏ó‡∏£‡∏£‡∏®‡∏Å‡∏≤‡∏£‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô - ‡∏ô‡∏ß‡∏±‡∏ï‡∏ß‡∏¥‡∏ñ‡∏µ‡∏ñ‡∏¥‡πà‡∏ô ‡∏™‡∏≤‡∏ô‡∏®‡∏¥‡∏•‡∏õ‡πå‡∏ö‡∏≤‡∏á‡∏ï‡∏∞‡∏û‡∏≤‡∏ô</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Sarabun', sans-serif; }
    .aspect-a4-landscape { aspect-ratio: 297 / 210; width: 100%; }
    #detail-img { object-fit: contain; background-color: #1e293b; }
    .slider-box {
      aspect-ratio: 8 / 3; width: 100%; max-width: 1000px;
      margin: 0 auto 24px auto; background: #fff; border-radius: 15px; 
      overflow: hidden; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    .slide-img { width: 100%; height: 100%; object-fit: cover; position: absolute; opacity: 0; transition: opacity 1s ease-in-out; }
    .slide-img.active { opacity: 1; }
    .fade-in { animation: fadeIn 0.3s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    .spin { animation: spin 1s linear infinite; }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
  </style>
</head>
<body class="h-full bg-slate-50 flex flex-col">
  <div id="app" class="flex-grow pb-12">
    <header class="bg-emerald-600 text-white shadow-lg sticky top-0 z-50">
      <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 flex items-center justify-center overflow-hidden bg-white/10 rounded-xl">
            <img src="https://img5.pic.in.th/file/secure-sv1/-1d63dfb2624f66959.png" alt="Logo" class="w-full h-full object-contain p-1">
          </div>
          <div>
            <h1 class="text-lg font-bold leading-none">‡∏ô‡∏¥‡∏ó‡∏£‡∏£‡∏®‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£</h1>
            <p class="text-[10px] text-emerald-100 uppercase tracking-widest">‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ô‡∏¥‡∏ó‡∏£‡∏£‡∏®‡∏Å‡∏≤‡∏£‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
          </div>
        </div>
        <div id="user-info" class="hidden flex items-center gap-2">
           <div id="user-display" class="text-xs bg-white/20 px-3 py-1.5 rounded-l-full font-bold"></div>
           <button onclick="logout()" class="text-xs bg-red-500 hover:bg-red-600 px-3 py-1.5 rounded-r-full font-bold transition-colors">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</button>
        </div>
      </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 py-6">
      <section id="page-login" class="fade-in max-w-md mx-auto mt-12">
        <div class="bg-white p-8 rounded-3xl shadow-xl border border-slate-100 text-center">
          <h2 class="text-2xl font-bold text-slate-800 mb-6">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö</h2>
          <form id="login-form" class="space-y-4">
            <input type="text" id="input-evaluator" required placeholder="‡∏Å‡∏£‡∏≠‡∏Å ‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô" class="w-full px-5 py-4 bg-slate-50 border-2 border-transparent focus:border-emerald-500 rounded-2xl outline-none">
            <button type="submit" class="w-full bg-emerald-600 text-white py-4 rounded-2xl font-bold shadow-lg shadow-emerald-200">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
          </form>
        </div>
      </section>

      <section id="page-main" class="hidden fade-in space-y-6">
        <div id="st-slider" class="slider-box"></div>
        <div id="container-rooms" class="space-y-6">
          <h2 class="text-2xl font-bold text-slate-800 border-l-4 border-emerald-500 pl-3">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h2>
          <div id="classroom-list" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>
        </div>

        <div id="container-projects" class="hidden space-y-6">
          <div class="flex items-center gap-4">
            <button onclick="backToRooms()" class="p-2 bg-white rounded-xl shadow-sm"><svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M15 19l-7-7 7-7" stroke-width="2.5"/></svg></button>
            <h2 id="room-title" class="text-2xl font-bold text-slate-800">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô</h2>
          </div>
          <div id="project-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>
      </section>
    </main>

    <div id="modal-detail" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] p-4 flex items-center justify-center">
      <div class="bg-white w-full max-w-2xl rounded-3xl overflow-hidden shadow-2xl flex flex-col max-h-[95vh]">
        <div class="relative bg-slate-200 aspect-a4-landscape"> 
          <img id="detail-img" src="" class="w-full h-full object-contain bg-slate-800"> 
          <button onclick="closeModal()" class="absolute top-4 right-4 bg-black/50 text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-black">‚úï</button>
        </div>
        <div class="p-6 overflow-y-auto">
          <h3 id="detail-title" class="text-xl font-bold text-slate-800 mb-1"></h3>
          <p id="detail-members" class="text-emerald-600 text-xs font-semibold mb-4"></p>
          <div id="ebook-area" class="mb-4"></div>
          
          <form id="eval-form" class="space-y-6 border-t pt-5">
            <div id="criteria-list" class="space-y-5"></div>
            
            <div class="space-y-2">
              <label class="block text-sm font-bold text-slate-700">‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
              <textarea name="suggestion" rows="3" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)" class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-emerald-500 text-sm"></textarea>
            </div>

            <button type="submit" id="btn-submit" class="w-full bg-emerald-600 text-white py-4 rounded-2xl font-bold shadow-lg disabled:bg-slate-300">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</button>
          </form>
        </div>
      </div>
    </div>

    <div id="modal-loading" class="hidden fixed inset-0 bg-white/90 z-[100] flex flex-col items-center justify-center">
      <div class="w-10 h-10 border-4 border-emerald-600 border-t-transparent rounded-full spin mb-4"></div>
      <p class="font-bold text-emerald-800">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...</p>
    </div>
  </div>

<footer class="bg-emerald-600 text-emerald-100/60 py-8 text-center text-sm">
    <p class="font-medium">Developed by Atiwat Timtong</p>
    <p class="text-[11px] mt-1 opacity-80">
         ¬© 2026 ‡∏ô‡∏ß‡∏±‡∏ï‡∏ß‡∏¥‡∏ñ‡∏µ‡∏ñ‡∏¥‡πà‡∏ô ‡∏™‡∏≤‡∏ô‡∏®‡∏¥‡∏•‡∏õ‡πå‡∏ö‡∏≤‡∏á‡∏ï‡∏∞‡∏û‡∏≤‡∏ô
    </p>
</footer>

  <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwmrUBdFqnYJlpQVLZWyTecvDJlg9WqOHvsJKDigg2y4_TluxCa472P8Mkcdj4eUF3d/exec";
    let allProjects = [], allEvals = [], slideTimer = null, currentEvaluator = '', currentRoom = '', selectedProject = null;

    const classrooms = [
      { id: 'room-6-1', name: '‡∏°.6/1' }, { id: 'room-6-2', name: '‡∏°.6/2' }, { id: 'room-6-3', name: '‡∏°.6/3' },
      { id: 'room-6-4', name: '‡∏°.6/4' }, { id: 'room-6-5', name: '‡∏°.6/5' }, { id: 'room-6-6', name: '‡∏°.6/6' },
      { id: 'room-6-7', name: '‡∏°.6/7' }, { id: 'room-6-8', name: '‡∏°.6/8' }, { id: 'room-6-9', name: '‡∏°.6/9' },
      { id: 'room-6-10', name: '‡∏°.6/10' }, { id: 'room-6-11', name: '‡∏°.6/11' }
    ];

    const criteria = [
      { id: 'score_1', label: '1. ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏ö‡∏π‡∏ò‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ô‡∏¥‡∏ó‡∏£‡∏£‡∏®‡∏Å‡∏≤‡∏£ (20 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)', max: 20 },
      { id: 'score_2', label: '2. ‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠‡∏ú‡∏•‡∏á‡∏≤‡∏ô (20 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)', max: 20 },
      { id: 'score_3', label: '3. ‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£ (10 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)', max: 10 },
      { id: 'score_4', label: '4. ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÑ‡∏õ‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î‡πÅ‡∏•‡∏∞‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà (10 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)', max: 10 }
    ];

    function initSlider(slides) {
      const box = document.getElementById('st-slider');
      if (slides && slides.length > 0) {
        box.innerHTML = slides.map((s, i) => `<img src="${s.url}" class="slide-img ${i === 0 ? 'active' : ''}">`).join('');
        let idx = 0;
        if (slideTimer) clearInterval(slideTimer);
        slideTimer = setInterval(() => {
          const imgs = box.querySelectorAll('.slide-img');
          if (imgs.length > 1) {
            imgs[idx].classList.remove('active');
            idx = (idx + 1) % imgs.length;
            imgs[idx].classList.add('active');
          }
        }, 5000);
      }
    }

    async function loadData() {
      document.getElementById('modal-loading').classList.remove('hidden');
      try {
        const res = await fetch(SCRIPT_URL);
        const json = await res.json();
        allProjects = json.projects;
        allEvals = json.evals;
        initSlider(json.slides);
        renderClassrooms();
      } catch (e) { alert("‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß! ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï"); }
      document.getElementById('modal-loading').classList.add('hidden');
    }

    function renderClassrooms() {
      const list = document.getElementById('classroom-list');
      list.innerHTML = classrooms.map(c => {
        const count = allProjects.filter(p => p.Classroom_ID === c.id).length;
        return `
          <button onclick="selectRoom('${c.id}')" class="bg-white p-6 rounded-3xl shadow-sm border border-slate-100 hover:border-emerald-500 transition-all text-left group">
            <div class="w-12 h-12 bg-emerald-500 rounded-2xl mb-4 flex items-center justify-center group-hover:scale-110 transition-transform shadow-lg shadow-emerald-200">
               <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" stroke-width="2"/></svg>
            </div>
            <div class="font-bold text-xl text-slate-800">${c.name}</div>
            <div class="text-slate-400 text-sm">‡∏ä‡∏±‡πâ‡∏ô‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏µ‡∏ó‡∏µ‡πà 6</div>
            <div class="text-emerald-600 text-xs font-bold mt-2 uppercase">${count} ‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô</div>
          </button>
        `;
      }).join('');
    }

    function selectRoom(id) {
      currentRoom = id;
      document.getElementById('container-rooms').classList.add('hidden');
      document.getElementById('container-projects').classList.remove('hidden');
      document.getElementById('room-title').textContent = "‡∏´‡πâ‡∏≠‡∏á " + classrooms.find(c => c.id === id).name;
      
      const projects = allProjects.filter(p => p.Classroom_ID === id);
      const list = document.getElementById('project-list');
      list.innerHTML = projects.map(p => {
        const isDone = allEvals.some(e => e.project_id === p.Project_ID && e.evaluator === currentEvaluator);
        return `
          <div class="bg-white rounded-3xl shadow-sm overflow-hidden border border-slate-100 group">
            <div class="aspect-a4-landscape bg-slate-100 relative overflow-hidden">
              <img src="${p.Image_URL}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
              ${isDone ? '<div class="absolute inset-0 bg-emerald-600/40 backdrop-blur-sm flex items-center justify-center font-bold text-white text-sm">‚úì ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß</div>' : ''}
            </div>
            <div class="p-5">
              <div class="text-[10px] font-bold text-emerald-600 uppercase mb-1">‡∏Å‡∏•‡∏∏‡πà‡∏° ${p.Group_No}</div>
              <h3 class="font-bold text-slate-800 line-clamp-2 h-12 text-lg leading-tight mb-4">${p.Title}</h3>
              <button onclick="openDetail('${p.Project_ID}')" class="w-full py-3 ${isDone ? 'bg-slate-100 text-slate-400' : 'bg-emerald-50 text-emerald-700 hover:bg-emerald-600 hover:text-white'} rounded-xl font-bold transition-all">
                ${isDone ? '‡∏î‡∏π‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô' : '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô'}
              </button>
            </div>
          </div>
        `;
      }).join('');
    }

    function openDetail(id) {
      selectedProject = allProjects.find(p => p.Project_ID === id);
      const isDone = allEvals.some(e => e.project_id === id && e.evaluator === currentEvaluator);

      document.getElementById('detail-img').src = selectedProject.Image_URL;
      document.getElementById('detail-title').textContent = selectedProject.Title;
      document.getElementById('detail-members').textContent = selectedProject.Members;
      
      const ebookArea = document.getElementById('ebook-area');
      ebookArea.innerHTML = selectedProject.Ebook_Link ? `<a href="${selectedProject.Ebook_Link}" target="_blank" class="inline-flex items-center gap-2 text-blue-600 font-bold text-sm bg-blue-50 px-3 py-2 rounded-xl">üìò ‡∏≠‡πà‡∏≤‡∏ô E-Book</a>` : '';

      const btnSubmit = document.getElementById('btn-submit');
      const cList = document.getElementById('criteria-list');
      const evalForm = document.getElementById('eval-form');

      evalForm.reset(); // ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°

      if (isDone) {
        btnSubmit.disabled = true;
        btnSubmit.textContent = "‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß";
        cList.innerHTML = `<p class="text-center py-4 text-emerald-600 font-bold">‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏™‡πà‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß</p>`;
        evalForm.querySelector('textarea').closest('div').classList.add('hidden');
      } else {
        btnSubmit.disabled = false;
        btnSubmit.textContent = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô";
        evalForm.querySelector('textarea').closest('div').classList.remove('hidden');
        cList.innerHTML = criteria.map(c => {
          const scores = c.max === 20 ? [20, 15, 10, 5, 0] : [10, 7, 5, 3, 0];
          return `
            <div>
              <label class="block text-sm font-bold text-slate-700 mb-3">${c.label}</label>
              <div class="grid grid-cols-5 gap-2">
                ${scores.map(v => `
                  <label class="cursor-pointer">
                    <input type="radio" name="${c.id}" value="${v}" required class="sr-only peer">
                    <div class="py-2 text-center border-2 rounded-xl peer-checked:bg-emerald-500 peer-checked:text-white text-sm font-bold text-slate-400 border-slate-100 hover:border-emerald-200 transition-all">${v}</div>
                  </label>
                `).join('')}
              </div>
            </div>
          `;
        }).join('');
      }
      document.getElementById('modal-detail').classList.remove('hidden');
    }

    document.getElementById('eval-form').onsubmit = async (e) => {
      e.preventDefault();
      document.getElementById('modal-loading').classList.remove('hidden');
      const fd = new FormData(e.target);
      
      const s1 = parseInt(fd.get('score_1') || 0);
      const s2 = parseInt(fd.get('score_2') || 0);
      const s3 = parseInt(fd.get('score_3') || 0);
      const s4 = parseInt(fd.get('score_4') || 0);
      const sug = fd.get('suggestion') || '';

      const data = {
        evaluator_name: currentEvaluator,
        project_id: selectedProject.Project_ID,
        score_1: s1,
        score_2: s2,
        score_3: s3,
        score_4: s4,
        total_score: (s1 + s2 + s3 + s4),
        suggestion: sug
      };

      try {
        await fetch(SCRIPT_URL, { method: 'POST', body: JSON.stringify(data) });
        allEvals.push({ evaluator: currentEvaluator, project_id: selectedProject.Project_ID });
        alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß (‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: " + data.total_score + "/60)");
        closeModal();
        selectRoom(currentRoom);
      } catch (err) { 
        alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á"); 
      }
      document.getElementById('modal-loading').classList.add('hidden');
    };

    function backToRooms() {
      document.getElementById('container-projects').classList.add('hidden');
      document.getElementById('container-rooms').classList.remove('hidden');
    }

    function closeModal() { document.getElementById('modal-detail').classList.add('hidden'); }
    
    function showPage(id) {
      document.getElementById('page-login').classList.add('hidden');
      document.getElementById('page-main').classList.add('hidden');
      document.getElementById(id).classList.remove('hidden');
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Logout ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô
    function logout() {
       if(confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
          localStorage.removeItem('evaluator_name');
          document.getElementById('user-info').classList.add('hidden');
          showPage('page-login');
       }
    }

    document.getElementById('login-form').onsubmit = (e) => {
      e.preventDefault();
      currentEvaluator = document.getElementById('input-evaluator').value;
      localStorage.setItem('evaluator_name', currentEvaluator);
      updateUserDisplay();
      showPage('page-main');
      loadData();
    };

    function updateUserDisplay() {
        document.getElementById('user-display').textContent = "‡∏Ñ‡∏£‡∏π: " + currentEvaluator;
        document.getElementById('user-info').classList.remove('hidden');
    }

    window.onload = () => {
      const savedUser = localStorage.getItem('evaluator_name');
      if (savedUser) {
        currentEvaluator = savedUser;
        updateUserDisplay();
        showPage('page-main');
        loadData();
      }
    };
  </script>
</body>
</html>
